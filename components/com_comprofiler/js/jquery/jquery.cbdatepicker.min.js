!function(e){var t=[],s={init:function(s){return this.each(function(){var n=this,a=e(n).data("cbdatepicker");if(!a&&(a={},a.options="undefined"!=typeof s?s:{},a.defaults=e.fn.cbdatepicker.defaults,a.settings=e.extend(!0,{},a.defaults,a.options),a.strings=e.extend(!0,{},e.datepicker.regional[""],a.settings.strings),a.element=e(n),a.settings.useData&&e.each(a.defaults,function(e){if("init"!=e&&"useData"!=e){var t=a.element.data("cbdatepicker"+e.charAt(0).toUpperCase()+e.slice(1));"undefined"!=typeof t?a.settings[e]=t:(t=a.element.data("cbdatepicker"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()),"undefined"!=typeof t&&(a.settings[e]=t))}}),a.element.triggerHandler("cbdatepicker.init.before",[a]),a.settings.init)){var i=(new Date).getFullYear();if(a.settings.minYear){if("string"==typeof a.settings.minYear){var r=a.settings.minYear.substr(0,1),m=a.settings.minYear.substr(1);"+"==r?a.settings.minYear=i+parseInt(m):"-"==r&&(a.settings.minYear=i-parseInt(m))}}else a.settings.minYear=i-99;if(a.settings.maxYear){if("string"==typeof a.settings.maxYear){var o=a.settings.maxYear.substr(0,1),c=a.settings.maxYear.substr(1);"+"==o?a.settings.maxYear=i+parseInt(c):"-"==o&&(a.settings.maxYear=i-parseInt(c))}}else a.settings.maxYear=i+99;if(2==a.settings.calendarType||3==a.settings.calendarType){var d=null;"undefined"!=typeof moment&&(d=moment.locale(),moment.locale(Math.random(),{months:a.strings.monthNames,monthsShort:a.strings.monthNamesShort,weekdays:a.strings.dayNames,weekdaysShort:a.strings.dayNamesShort,weekdaysMin:a.strings.dayNamesMin})),a.combodate=a.element.combodate({format:a.settings.format,template:a.settings.template,minYear:a.settings.minYear,maxYear:a.settings.maxYear,firstItem:a.settings.firstItem,smartDays:!0,yearDescending:!1,customClass:a.settings.customClass}),d&&moment.locale(d),a.element.siblings(".combodate").children().on("change",function(){var t=e(this).val();e(this).siblings().each(""!==t?function(){if(!e(this).val()){var t=null;e(this).hasClass("year")&&(t=e(this).children('option[value="'+i+'"]').val()),t||(t=e(this).children('option[value!=""]:first').val()),t&&e(this).val(t)}}:function(){e(this).val("")}),a.element.triggerHandler("cbdatepicker.select",[a,a.element.combodate("getValue")])})}(1==a.settings.calendarType||a.settings.addPopup)&&(a.settings.showTime?a.datetimepicker=a.element.datetimepicker({stepMinute:5,stepSecond:1,timeFormat:a.settings.timeFormat,amNames:a.strings.amNames,pmNames:a.strings.pmNames,timeOnlyTitle:a.strings.timeOnlyTitle,timeText:a.strings.timeText,hourText:a.strings.hourText,minuteText:a.strings.minuteText,secondText:a.strings.secondText,millisecText:a.strings.millisecText,microsecText:a.strings.microsecText,timezoneText:a.strings.timezoneText,onSelect:function(e){a.settings.addPopup?a.element.combodate("setValue",e):a.element.change(),a.element.triggerHandler("cbdatepicker.select",[a,e])},yearRange:a.settings.minYear+":"+a.settings.maxYear,isRTL:a.settings.isRTL,firstDay:a.settings.firstDay,changeMonth:!0,changeYear:!0,showButtonPanel:!1,dateFormat:a.settings.dateFormat,dayNames:a.strings.dayNames,dayNamesMin:a.strings.dayNamesMin,dayNamesShort:a.strings.dayNamesShort,monthNames:a.strings.monthNames,monthNamesShort:a.strings.monthNamesShort,prevText:a.strings.prevText,nextText:a.strings.nextText,currentText:a.strings.currentText,closeText:a.strings.closeText}):a.datepicker=a.element.datepicker({onSelect:function(e){a.settings.addPopup?a.element.combodate("setValue",e):a.element.change(),a.element.triggerHandler("cbdatepicker.select",[a,e])},yearRange:a.settings.minYear+":"+a.settings.maxYear,isRTL:a.settings.isRTL,firstDay:a.settings.firstDay,changeMonth:!0,changeYear:!0,showButtonPanel:!1,dateFormat:a.settings.dateFormat,dayNames:a.strings.dayNames,dayNamesMin:a.strings.dayNamesMin,dayNamesShort:a.strings.dayNamesShort,monthNames:a.strings.monthNames,monthNamesShort:a.strings.monthNamesShort,prevText:a.strings.prevText,nextText:a.strings.nextText,currentText:a.strings.currentText,closeText:a.strings.closeText})),a.calendarHandler=function(t){t.preventDefault();var s=a.element.datepicker("widget");s.not(":visible").length&&(a.element.datepicker("show"),s.position({my:"left top+20",at:"left top",of:e(this)})),a.element.triggerHandler("cbdatepicker.calendar",[a])},a.element.siblings(".hasCalendar").on("click",a.calendarHandler),a.changeHandler=function(){var t=e(this),s=e(this).val();if(a.settings.target&&(t=e(a.settings.target)),a.settings.offset&&s){var n=moment(s);n.isValid()&&(s=n.utc().utcOffset(String(a.settings.offset)).format(a.settings.format))}t.val(s)},a.element.on("change",a.changeHandler),a.element.on("remove destroy.cbdatepicker",function(){a.element.cbdatepicker("destroy")}),a.element.on("rebind.cbdatepicker",function(){a.element.cbdatepicker("rebind")}),a.element.on("modified.cbdatepicker",function(e,t,s){t!=s&&a.element.cbdatepicker("rebind")}),a.element.on("cloned.cbdatepicker",function(){e(this).off("destroy.cbdatepicker"),e(this).off("rebind.cbdatepicker"),e(this).off("cloned.cbdatepicker"),e(this).off("modified.cbdatepicker"),e(this).removeData("cbdatepicker"),e(this).removeData("combodate"),e(this).removeData("datepicker"),e(this).siblings(".combodate").remove(),e(this).removeClass("hasDatepicker"),e(this).siblings(".hasCalendar").off("click",a.calendarHandler),e(this).off("change",a.changeHandler),e(this).cbdatepicker(a.options)}),a.element.triggerHandler("cbdatepicker.init.after",[a]),a.element.data("cbdatepicker",a),t.push(a)}})},rebind:function(){var t=e(this).data("cbdatepicker");return t?(t.element.cbdatepicker("destroy"),t.element.cbdatepicker(t.options),this):this},destroy:function(){var s=e(this).data("cbdatepicker");return s?(s.combodate&&s.element.combodate("destroy"),s.datetimepicker&&s.element.datetimepicker("destroy"),s.datepicker&&s.element.datepicker("destroy"),s.element.siblings(".hasCalendar").off("click",s.calendarHandler),s.element.off("change",s.changeHandler),s.element.off("destroy.cbdatepicker"),s.element.off("rebind.cbdatepicker"),s.element.off("cloned.cbdatepicker"),s.element.off("modified.cbdatepicker"),e.each(t,function(e,n){return n.element==s.element?(t.splice(e,1),!1):!0}),s.element.removeData("cbdatepicker"),s.element.triggerHandler("cbdatepicker.destroyed",[s]),this):this},instances:function(){return t}};e.fn.cbdatepicker=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:s.init.apply(this,arguments)},e.fn.cbdatepicker.defaults={init:!0,useData:!0,calendarType:2,template:"Y-m-d H:i:s",format:"Y-m-d H:i:s",timeFormat:"H:i:s",dateFormat:"Y-m-d",minYear:"-99",maxYear:"+99",firstDay:0,showTime:!1,addPopup:!1,isRTL:!1,customClass:null,firstItem:"empty",offset:null,target:null}}(jQuery);