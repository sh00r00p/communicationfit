!function(e){function s(e){e.settings.height&&e.element.children(".cbMoreLessContent").css("max-height","none"),e.element.removeClass("cbMoreLessClosed").addClass("cbMoreLessOpened"),e.element.children(".cbMoreLessOpen").addClass("hidden"),e.element.children(".cbMoreLessClose").removeClass("hidden")}function t(e){e.settings.height&&e.element.children(".cbMoreLessContent").css("max-height",e.settings.height),e.element.removeClass("cbMoreLessOpened").addClass("cbMoreLessClosed"),e.element.children(".cbMoreLessOpen").removeClass("hidden"),e.element.children(".cbMoreLessClose").addClass("hidden")}var n=[],o={init:function(o){return this.each(function(){var l=this,i=e(l).data("cbmoreless");if(!i&&(i={},i.options="undefined"!=typeof o?o:{},i.defaults=e.fn.cbmoreless.defaults,i.settings=e.extend(!0,{},i.defaults,i.options),i.element=e(l),i.bg=null,i.settings.useData&&e.each(i.defaults,function(e){if("init"!=e&&"useData"!=e){var s=i.element.data("cbmoreless"+e.charAt(0).toUpperCase()+e.slice(1));"undefined"!=typeof s?i.settings[e]=s:(s=i.element.data("cbmoreless"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()),"undefined"!=typeof s&&(i.settings[e]=s))}}),i.element.triggerHandler("cbmoreless.init.before",[i]),i.settings.init)){if(i.settings.height||(i.settings.height=100),i.element.parentsUntil("body").each(function(){var s=e(this).css("background-color");return s&&""!=s&&"transparent"!=s&&"rgba(0, 0, 0, 0)"!=s?(i.bg=s,!1):void 0}),i.bg&&(i.element.children(".cbMoreLessOpen.fade-edge,.cbMoreLessClose.fade-edge").css("background-image","linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, "+i.bg+" 100%)"),i.element.children(".cbMoreLessOpen,.cbMoreLessClose").find(".cbMoreLessButton").css("background-color",i.bg)),i.openHandler=function(e){e.preventDefault(),s.call(l,i)},i.closeHandler=function(e){e.preventDefault(),t.call(l,i)},i.element.children(".cbMoreLessOpen").on("click",i.openHandler),i.element.children(".cbMoreLessClose").on("click",i.closeHandler),!i.element.hasClass("cbMoreLessOpened")){i.element.removeClass("cbMoreLessClosed"),i.element.children(".cbMoreLessOpen,.cbMoreLessClose").addClass("hidden");var r=i.element.children(".cbMoreLessContent");if(i.settings.height&&(r.css("max-height",i.settings.height),r.css("height",i.settings.height)),"undefined"!=typeof r.get(0)){var c=r.height(),d=r.prop("scrollHeight");if(r.is(":hidden")&&0==d){var a=r.parents(":hidden");a.each(function(){e(this).addClass("cbForceDisplay")}),c=r.height(),d=r.prop("scrollHeight"),a.each(function(){e(this).removeClass("cbForceDisplay")})}d>c?t.call(this,i):s.call(this,i)}else s.call(this,i);i.settings.height&&r.css("height","")}i.element.on("remove destroy.cbmoreless",function(){i.element.cbmoreless("destroy")}),i.element.on("rebind.cbmoreless",function(){i.element.cbmoreless("rebind")}),i.element.on("modified.cbmoreless",function(e,s,t){s!=t&&i.element.cbmoreless("rebind")}),i.element.on("cloned.cbmoreless",function(){i.settings.height&&e(this).children(".cbMoreLessContent").css("max-height","none"),e(this).off("destroy.cbmoreless"),e(this).off("rebind.cbmoreless"),e(this).off("modified.cbmoreless"),e(this).off("cloned.cbmoreless"),e(this).children(".cbMoreLessOpen").off("click",i.openHandler).addClass("hidden"),e(this).children(".cbMoreLessClose").off("click",i.closeHandler).addClass("hidden"),e(this).removeClass("cbMoreLessOpened cbMoreLessClosed"),e(this).removeData("cbmoreless"),e(this).cbmoreless(i.options)}),i.element.triggerHandler("cbmoreless.init.after",[i]),i.element.data("cbmoreless",i),n.push(i)}})},update:function(){var s=e(this).data("cbmoreless");return s?(updateToggle.call(this,s),this):this},open:function(){var t=e(this).data("cbmoreless");return t?(s.call(this,t),this):this},close:function(){var s=e(this).data("cbmoreless");return s?(t.call(this,s),this):this},rebind:function(){var s=e(this).data("cbmoreless");return s?(s.element.cbmoreless("destroy"),s.element.cbmoreless(s.options),this):this},destroy:function(){var s=e(this).data("cbmoreless");return s?(s.settings.height&&s.element.children(".cbMoreLessContent").css("max-height","none"),s.element.off("destroy.cbmoreless"),s.element.off("rebind.cbmoreless"),s.element.off("modified.cbmoreless"),s.element.off("cloned.cbmoreless"),s.element.children(".cbMoreLessOpen").off("click",s.openHandler).addClass("hidden"),s.element.children(".cbMoreLessClose").off("click",s.closeHandler).addClass("hidden"),s.element.removeClass("cbMoreLessOpened cbMoreLessClosed"),s.element.removeData("cbmoreless"),s.element.triggerHandler("cbmoreless.destroyed",[s]),this):this},instances:function(){return n}};e.fn.cbmoreless=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:o.init.apply(this,arguments)},e.fn.cbmoreless.defaults={init:!0,useData:!0,height:100}}(jQuery);