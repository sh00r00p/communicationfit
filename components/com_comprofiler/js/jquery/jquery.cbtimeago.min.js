!function(t){var e=[],i={init:function(i){return this.each(function(){var n=this,s=t(n).data("cbtimeago");if(!s&&(s={},s.options="undefined"!=typeof i?i:{},s.defaults=t.fn.cbtimeago.defaults,s.settings=t.extend(!0,{},s.defaults,s.options),s.element=t(n),s.datetime=s.element.data("cbtimeago-datetime"),s.datetime||(s.datetime=s.element.attr("title"),s.datetime||(s.datetime=s.element.text())),s.settings.useData&&t.each(s.defaults,function(t){if("init"!=t&&"useData"!=t){var e=s.element.data("cbtimeago"+t.charAt(0).toUpperCase()+t.slice(1));"undefined"!=typeof e?s.settings[t]=e:(e=s.element.data("cbtimeago"+t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()),"undefined"!=typeof e&&(s.settings[t]=e))}}),s.element.triggerHandler("cbtimeago.init.before",[s]),s.settings.init)){s.settings.hideAgo&&(s.settings.strings.future="%s",s.settings.strings.past="%s");var a=null;"undefined"!=typeof moment&&(a=moment.locale(),moment.locale(Math.random(),{relativeTime:{future:s.settings.strings.future,past:s.settings.strings.past,s:s.settings.strings.seconds,m:s.settings.strings.minute,mm:s.settings.strings.minutes,h:s.settings.strings.hour,hh:s.settings.strings.hours,d:s.settings.strings.day,dd:s.settings.strings.days,M:s.settings.strings.month,MM:s.settings.strings.months,y:s.settings.strings.year,yy:s.settings.strings.years}})),s.livestamp=s.element.livestamp(s.datetime),a&&moment.locale(a),s.element.on("remove destroy.cbtimeago",function(){s.element.cbtimeago("destroy")}),s.element.on("rebind.cbtimeago",function(){s.element.cbtimeago("rebind")}),s.element.on("modified.cbtimeago",function(t,e,i){e!=i&&s.element.cbtimeago("rebind")}),s.element.on("cloned.cbtimeago",function(){t(this).off("destroy.cbtimeago"),t(this).off("rebind.cbtimeago"),t(this).off("cloned.cbtimeago"),t(this).off("modified.cbtimeago"),t(this).removeData("cbtimeago"),t(this).removeData("livestampdata"),t(this).text(""),t(this).data("cbtimeago-datetime")||t(this).attr("title")||t(this).text(s.datetime),t(this).cbtimeago(s.options)}),s.element.triggerHandler("cbtimeago.init.after",[s]),s.element.data("cbtimeago",s),e.push(s)}})},rebind:function(){var e=t(this).data("cbtimeago");return e?(e.element.cbtimeago("destroy"),e.element.cbtimeago(e.options),this):this},destroy:function(){var i=t(this).data("cbtimeago");return i?(i.element.livestamp("destroy"),i.element.off("destroy.cbtimeago"),i.element.off("rebind.cbtimeago"),i.element.off("cloned.cbtimeago"),i.element.off("modified.cbtimeago"),t.each(e,function(t,n){return n.element==i.element?(e.splice(t,1),!1):!0}),i.element.text(""),i.element.data("cbtimeago-datetime")||i.element.attr("title")||i.element.text(i.datetime),i.element.removeData("cbtimeago"),i.element.triggerHandler("cbtimeago.destroyed",[i]),this):this},instances:function(){return e}};t.fn.cbtimeago=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?this:i.init.apply(this,arguments)},t.fn.cbtimeago.defaults={init:!0,useData:!0,hideAgo:!1,strings:{future:"in %s",past:"%s ago",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"}}}(jQuery);